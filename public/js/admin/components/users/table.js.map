{"version":3,"sources":["admin/components/users/table.js"],"names":["System","register","_export","_context","util","Vue","adminUsersTable","setters","_util","_vue","execute","template","props","per_page","String","data","loading","users","from","to","total","prev_page_url","next_page_url","page","search","methods","setPerPage","perPage","this","fetchPage","query","arguments","length","undefined","include","q","$http","get","$root","routes","route","then","response","hasOwnProperty","message","timeout","$dispatch","searchFor","editUser","user","event","preventDefault","stopPropagation","window","location","href","id","addUser","ready","setTimeout","bind","component"],"mappings":"AAAA,YAEAA,QAAOC,UAAU,OAAQ,OAAQ,SAAUC,EAASC,GAChD,GAAIC,GAAMC,EAAKC,CACf,QACIC,SAAU,SAAUC,GAAhBJ,EAAAI,GAED,SAAUC,GADdJ,EAAAI,EAAAA,aAICC,QAAS,WAFbJ,GACAK,SAAU,8BACVC,OACIC,SAAUC,QAEdC,KAAM,WACF,OACIC,SAAS,EACTC,SACAC,KAAM,EACNC,GAAI,EACJC,MAAO,EACPC,cAAe,KACfC,cAAe,KACfC,KAAM,EACNC,OAAQ,KAGhBC,SACIC,WAAY,SAASC,GACjBC,KAAKf,SAAWc,EAChBC,KAAKC,UAAU,IAEnBA,UAAW,SAASN,GAIJ,GAJUO,GAAAC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,IAAQ,EAAAA,UAAA,EAE9BH,MAAKZ,SAAU,CAEf,IAAID,IACAmB,QAAS,QACTX,KAAMA,EACNV,SAAUe,KAAKf,SAGP,IAATiB,GAAgC,IAAfF,KAAKJ,SACrBT,EAAKoB,GACD,mBAAqBP,KAAKJ,OAC1B,kBAAoBI,KAAKJ,OACzB,cAAgBI,KAAKJ,SAI7BI,KAAKQ,MAAMC,IAAIT,KAAKU,MAAMC,OAAOC,MAAM,aAAczB,GAAM0B,KAAK,SAAUC,GAEtEd,KAAKX,MAAQyB,EAAS3B,KAAKA,KAC3Ba,KAAKV,KAAOwB,EAAS3B,KAAKG,KAC1BU,KAAKT,GAAKuB,EAAS3B,KAAKI,GACxBS,KAAKR,MAAQsB,EAAS3B,KAAKK,MAC3BQ,KAAKP,cAAgBqB,EAAS3B,KAAKM,cACnCO,KAAKN,cAAgBoB,EAAS3B,KAAKO,cAEnCM,KAAKZ,SAAU,EAEfY,KAAKL,KAAOA,GAEb,SAAUmB,GAET,GAAIA,EAAS3B,KAAK4B,eAAe,WAAY,CACzC,GAAI5B,IAAQ6B,QAASF,EAAS3B,KAAK6B,QAASC,QAAS,IACrDjB,MAAKkB,UAAU,eAAgB/B,OAC9B,CAGD,GAAIA,IAAQ6B,QAAS,gGAAiGC,QAAS,IAC/HjB,MAAKkB,UAAU,eAAgB/B,GAThBa,KAcdZ,SAAU,KAGvB+B,UAAA,WACInB,KAAKC,UAAU,GAAG,IAEtBmB,SAAA,SAASC,EAAMC,GACXA,EAAMC,iBACND,EAAME,kBACNC,OAAOC,SAASC,KAAO3B,KAAKU,MAAMC,OAAOC,MAAM,oBAAqBgB,GAAIP,EAAKO,MAEjFC,QAAA,SAAQP,GACJA,EAAMC,iBACND,EAAME,kBACNxB,KAAKkB,UAAU,cAGvBY,MAAO,WACHC,WAAW,WACP/B,KAAKC,UAAUD,KAAKL,OACtBqC,KAAKhC,MAAO,OAGV1B,EAAQ,UACLG,EAAIwD,UAAU,oBAAqBvD","file":"admin/components/users/table.js","sourcesContent":["/*!\n * FluentKit v0.1.0\n * (c) 2016 Lee Mason\n * Released under the MIT License.\n */\nimport * as util from 'util'\nimport Vue from 'vue'\n\nvar adminUsersTable = {\n    template: '#admin-users-table-template',\n    props: {\n        per_page: String\n    },\n    data: function(){\n        return {\n            loading: true,\n            users: [],\n            from: 0,\n            to: 0,\n            total: 0,\n            prev_page_url: null,\n            next_page_url: null,\n            page: 1,\n            search: ''\n        };\n    },\n    methods: {\n        setPerPage: function(perPage){\n            this.per_page = perPage;\n            this.fetchPage(1);\n        },\n        fetchPage: function(page, query = false){\n\n            this.loading = true;\n\n            var data = {\n                include: \"roles\",\n                page: page,\n                per_page: this.per_page\n            };\n\n            if(query == true && this.search != ''){\n                data.q = [\n                    'first_name:like:' + this.search,\n                    'last_name:like:' + this.search,\n                    'email:like:' + this.search\n                ];\n            }\n\n            this.$http.get(this.$root.routes.route('api.users'), data).then(function (response) {\n\n                this.users = response.data.data;\n                this.from = response.data.from;\n                this.to = response.data.to;\n                this.total = response.data.total;\n                this.prev_page_url = response.data.prev_page_url;\n                this.next_page_url = response.data.next_page_url;\n\n                this.loading = false;\n\n                this.page = page;\n\n            }, function (response) {\n\n                if (response.data.hasOwnProperty('message')) {\n                    var data = {message: response.data.message, timeout: 3000};\n                    this.$dispatch('notification', data);\n                }else{\n\n                    //something bad happened\n                    var data = {message: 'We encountered a technical problem performing this request, please contact the administrator.', timeout: 3000};\n                    this.$dispatch('notification', data);\n\n                }\n\n                //hide the loader, they can try again\n                this.loading = false;\n            });\n        },\n        searchFor(){\n            this.fetchPage(1, true);\n        },\n        editUser(user, event){\n            event.preventDefault();\n            event.stopPropagation();\n            window.location.href = this.$root.routes.route('admin.users.edit', {id: user.id});\n        },\n        addUser(event){\n            event.preventDefault();\n            event.stopPropagation();\n            this.$dispatch('add-user');\n        }\n    },\n    ready: function(){\n        setTimeout(function(){\n            this.fetchPage(this.page);\n        }.bind(this), 100);\n    }\n};\n\nexport default Vue.component('admin-users-table', adminUsersTable);\n\n//export default notifications"],"sourceRoot":"/source/"}