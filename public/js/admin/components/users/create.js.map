{"version":3,"sources":["admin/components/users/create.js"],"names":["System","register","_export","_context","util","Vue","_","adminUsersCreate","setters","_util","_vue","_lodash","execute","template","data","user","first_name","last_name","email","password","password_confirmation","loading","methods","triggerSave","this","$http","post","$root","routes","route","then","response","message","timeout","$dispatch","window","location","href","id","status","errors","formatValidationErrors","$setValidationErrors","closeForm","event","preventDefault","stopPropagation","component"],"mappings":"AAAA,YAEAA,QAAOC,UAAU,OAAQ,MAAO,UAAW,SAAUC,EAASC,GAC1D,GAAIC,GAAMC,EAAKC,EAAGC,CAElB,QACIC,SAAU,SAAUC,GADhBL,EAAAK,GAGD,SAAUC,GAFdL,EAAAK,EAAAA,YAII,SAAUC,GAHdL,EAAAK,EAAAA,aAMCC,QAAS,WAJbL,GACAM,SAAU,+BACVC,KAAM,WACF,OACIC,MACIC,WAAY,GACZC,UAAW,GACXC,MAAO,GACPC,SAAU,GACVC,sBAAuB,IAE3BC,SAAS,IAGjBC,SACIC,YAAa,WAETC,KAAKH,SAAU,EAEfG,KAAKC,MAAMC,KAAKF,KAAKG,MAAMC,OAAOC,MAAM,oBAAqBL,KAAKT,MAAMe,KAAK,SAAUC,GAEnF,GAAIjB,IAAQkB,QAASD,EAASjB,KAAKkB,QAASC,QAAS,IAErDT,MAAKU,UAAU,eAAgBpB,GAE/BqB,OAAOC,SAASC,KAAOb,KAAKG,MAAMC,OAAOC,MAAM,oBAAqBS,GAAIP,EAASjB,KAAKC,KAAKuB,MAE5F,SAAUP,GAET,GAAuB,KAAnBA,EAASQ,OAAe,CAGxB,GAAIC,GAASpC,EAAKqC,uBAAuBV,EAASjB,KAAK0B,OAH/BhB,MASnBkB,qBAAqBF,OAExB,IAAuB,KAAnBT,EAASQ,OAAe,CAE9B,GAAIzB,IAAQkB,QAASD,EAASjB,KAAMmB,QAAS,IAC7CT,MAAKU,UAAU,eAAgBpB,OAC9B,CAGD,GAAIA,IAAQkB,QAAS,gGAAiGC,QAAS,IAC/HT,MAAKU,UAAU,eAAgBpB,GAInCU,KAAKH,SAAU,KAIvBsB,UAAW,SAASC,GAChBA,EAAMC,iBACND,EAAME,kBACNtB,KAAKU,UAAU,mBAMfhC,EAAQ,UADLG,EAAI0C,UAAU,qBAAsBxC","file":"admin/components/users/create.js","sourcesContent":["/*!\n * FluentKit v0.1.0\n * (c) 2016 Lee Mason\n * Released under the MIT License.\n */\nimport * as util from 'util'\nimport Vue from 'vue'\nimport _ from 'lodash'\n\nvar adminUsersCreate = {\n    template: '#admin-users-create-template',\n    data: function(){\n        return {\n            user: {\n                first_name: '',\n                last_name: '',\n                email: '',\n                password: '',\n                password_confirmation: ''\n            },\n            loading: false\n        };\n    },\n    methods: {\n        triggerSave: function(){\n\n            this.loading = true;\n\n            this.$http.post(this.$root.routes.route('api.users.create'), this.user).then(function (response) {\n\n                var data = {message: response.data.message, timeout: 3000};\n\n                this.$dispatch('notification', data);\n\n                window.location.href = this.$root.routes.route('admin.users.edit', {id: response.data.user.id});\n\n            }, function (response) {\n\n                if (response.status == 422) {\n\n                    //validation/authorization error - set the errors as returned or clear\n                    var errors = util.formatValidationErrors(response.data.errors);\n                    /*var errors = _.flatMap(response.data.errors, function(messages, key){\n                        return _.map(messages, function(message){\n                            return {field: key, message: message};\n                        });\n                    });*/\n                    this.$setValidationErrors(errors);\n\n                }else if (response.status == 401) {\n                    //something bad happened\n                    var data = {message: response.data, timeout: 3000};\n                    this.$dispatch('notification', data);\n                }else{\n\n                    //something bad happened\n                    var data = {message: 'We encountered a technical problem performing this request, please contact the administrator.', timeout: 3000};\n                    this.$dispatch('notification', data);\n\n                }\n\n                this.loading = false;\n\n            });\n        },\n        closeForm: function(event){\n            event.preventDefault();\n            event.stopPropagation();\n            this.$dispatch('close-create');\n        }\n    }\n};\n\nexport default Vue.component('admin-users-create', adminUsersCreate);\n\n//export default notifications"],"sourceRoot":"/source/"}