{"version":3,"sources":["admin/components/roles/table.js"],"names":["System","register","_export","_context","util","Vue","adminRolesTable","setters","_util","_vue","execute","template","props","url","String","per_page","data","loading","roles","from","to","total","prev_page_url","next_page_url","page","search","methods","setPerPage","perPage","this","fetchPage","query","arguments","length","undefined","include","q","$http","get","then","response","hasOwnProperty","message","timeout","$dispatch","searchFor","editRole","role","event","preventDefault","stopPropagation","name","window","location","href","$root","routes","route","id","ready","component"],"mappings":"AAAA,YAEAA,QAAOC,UAAU,OAAQ,OAAQ,SAAUC,EAASC,GAChD,GAAIC,GAAMC,EAAKC,CACf,QACIC,SAAU,SAAUC,GAAhBJ,EAAAI,GAED,SAAUC,GADdJ,EAAAI,EAAAA,aAICC,QAAS,WAFbJ,GACAK,SAAU,8BACVC,OACIC,IAAKC,OACLC,SAAUD,QAEdE,KAAM,WACF,OACIC,SAAS,EACTC,SACAC,KAAM,EACNC,GAAI,EACJC,MAAO,EACPC,cAAe,KACfC,cAAe,KACfC,KAAM,EACNC,OAAQ,KAGhBC,SACIC,WAAY,SAASC,GACjBC,KAAKd,SAAWa,EAChBC,KAAKC,UAAU,IAEnBA,UAAW,SAASN,GAIJ,GAJUO,GAAAC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,IAAQ,EAAAA,UAAA,EAE9BH,MAAKZ,SAAU,CAEf,IAAID,IACAmB,QAAS,oBACTX,KAAMA,EACNT,SAAUc,KAAKd,SAGP,IAATgB,GAAgC,IAAfF,KAAKJ,SACrBT,EAAKoB,GAAK,cAAgBP,KAAKJ,SAGnCI,KAAKQ,MAAMC,IAAIT,KAAKhB,IAAKG,GAAMuB,KAAK,SAAUC,GAE1CX,KAAKX,MAAQsB,EAASxB,KAAKA,KAC3Ba,KAAKV,KAAOqB,EAASxB,KAAKG,KAC1BU,KAAKT,GAAKoB,EAASxB,KAAKI,GACxBS,KAAKR,MAAQmB,EAASxB,KAAKK,MAC3BQ,KAAKP,cAAgBkB,EAASxB,KAAKM,cACnCO,KAAKN,cAAgBiB,EAASxB,KAAKO,cAEnCM,KAAKZ,SAAU,EAEfY,KAAKL,KAAOA,GAEb,SAAUgB,GAET,GAAIA,EAASxB,KAAKyB,eAAe,WAAY,CACzC,GAAIzB,IAAQ0B,QAASF,EAASxB,KAAK0B,QAASC,QAAS,IACrDd,MAAKe,UAAU,eAAgB5B,OAC9B,CAGD,GAAIA,IAAQ0B,QAAS,gGAAiGC,QAAS,IAC/Hd,MAAKe,UAAU,eAAgB5B,GAThBa,KAcdZ,SAAU,KAGvB4B,UAAA,WACIhB,KAAKC,UAAU,GAAG,IAEtBgB,SAAA,SAASC,EAAMC,GACXA,EAAMC,iBACND,EAAME,kBACU,iBAAbH,EAAKI,OAGRC,OAAOC,SAASC,KAAOzB,KAAK0B,MAAMC,OAAOC,MAAM,oBAAqBC,GAAIX,EAAKW,QAGrFC,MAAO,WACH9B,KAAKC,UAAUD,KAAKL,QAOhBtB,EAAQ,UAHLG,EAAIuD,UAAU,oBAAqBtD","file":"admin/components/roles/table.js","sourcesContent":["/*!\n * FluentKit v0.1.0\n * (c) 2016 Lee Mason\n * Released under the MIT License.\n */\nimport * as util from 'util'\nimport Vue from 'vue'\n\nvar adminRolesTable = {\n    template: '#admin-roles-table-template',\n    props: {\n        url: String,\n        per_page: String\n    },\n    data: function(){\n        return {\n            loading: true,\n            roles: [],\n            from: 0,\n            to: 0,\n            total: 0,\n            prev_page_url: null,\n            next_page_url: null,\n            page: 1,\n            search: ''\n        };\n    },\n    methods: {\n        setPerPage: function(perPage){\n            this.per_page = perPage;\n            this.fetchPage(1);\n        },\n        fetchPage: function(page, query = false){\n\n            this.loading = true;\n\n            var data = {\n                include: \"permissions,users\",\n                page: page,\n                per_page: this.per_page\n            };\n\n            if(query == true && this.search != ''){\n                data.q = ['label:like:' + this.search];\n            }\n\n            this.$http.get(this.url, data).then(function (response) {\n\n                this.roles = response.data.data;\n                this.from = response.data.from;\n                this.to = response.data.to;\n                this.total = response.data.total;\n                this.prev_page_url = response.data.prev_page_url;\n                this.next_page_url = response.data.next_page_url;\n\n                this.loading = false;\n\n                this.page = page;\n\n            }, function (response) {\n\n                if (response.data.hasOwnProperty('message')) {\n                    var data = {message: response.data.message, timeout: 3000};\n                    this.$dispatch('notification', data);\n                }else{\n\n                    //something bad happened\n                    var data = {message: 'We encountered a technical problem performing this request, please contact the administrator.', timeout: 3000};\n                    this.$dispatch('notification', data);\n\n                }\n\n                //hide the loader, they can try again\n                this.loading = false;\n            });\n        },\n        searchFor(){\n            this.fetchPage(1, true);\n        },\n        editRole(role, event){\n            event.preventDefault();\n            event.stopPropagation();\n            if(role.name == 'administrator'){\n                return;\n            }\n            window.location.href = this.$root.routes.route('admin.roles.edit', {id: role.id});\n        }\n    },\n    ready: function(){\n        this.fetchPage(this.page);\n    }\n};\n\nexport default Vue.component('admin-roles-table', adminRolesTable);\n\n//export default notifications"],"sourceRoot":"/source/"}