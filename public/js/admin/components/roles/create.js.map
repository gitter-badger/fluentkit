{"version":3,"sources":["admin/components/roles/create.js"],"names":["System","register","_export","_context","util","Vue","adminRolesCreate","setters","_util","_vue","execute","template","data","role","label","name","permissions","loading","methods","triggerSave","this","$http","post","$root","routes","route","then","response","message","timeout","$dispatch","window","location","href","id","status","errors","formatValidationErrors","forEach","error","field","substring","$setValidationErrors","closeForm","event","preventDefault","stopPropagation","component"],"mappings":"AAAA,YAEAA,QAAOC,UAAU,OAAQ,OAAQ,SAAUC,EAASC,GAChD,GAAIC,GAAMC,EAAKC,CACf,QACIC,SAAU,SAAUC,GAAhBJ,EAAAI,GAED,SAAUC,GADdJ,EAAAI,EAAAA,aAICC,QAAS,WAFbJ,GACAK,SAAU,+BACVC,KAAM,WACF,OACIC,MACIC,MAAO,GACPC,KAAM,GACNC,gBAEJC,SAAS,IAGjBC,SACIC,YAAa,WAETC,KAAKH,SAAU,EAEfG,KAAKC,MAAMC,KAAKF,KAAKG,MAAMC,OAAOC,MAAM,oBAAqBL,KAAKP,MAAMa,KAAK,SAAUC,GAEnF,GAAIf,IAAQgB,QAASD,EAASf,KAAKgB,QAASC,QAAS,IAErDT,MAAKU,UAAU,eAAgBlB,GAE/BmB,OAAOC,SAASC,KAAOb,KAAKG,MAAMC,OAAOC,MAAM,oBAAqBS,GAAIP,EAASf,KAAKC,KAAKqB,MAE5F,SAAUP,GAET,GAAuB,KAAnBA,EAASQ,OAAe,CAGxB,GAAIC,GAAShC,EAAKiC,uBAAuBV,EAASf,KAAKwB,OACvDA,GAAOE,QAAQ,SAASC,GACpBA,EAAMC,MAAQD,EAAMC,MAAMC,UAAU,KAExCrB,KAAKsB,qBAAqBN,OAExB,IAAuB,KAAnBT,EAASQ,OAAe,CAE9B,GAAIvB,IAAQgB,QAASD,EAASf,KAAMiB,QAAS,IAC7CT,MAAKU,UAAU,eAAgBlB,OAC9B,CAGD,GAAIA,IAAQgB,QAAS,gGAAiGC,QAAS,IAC/HT,MAAKU,UAAU,eAAgBlB,GAInCQ,KAAKH,SAAU,KAIvB0B,UAAW,SAASC,GAChBA,EAAMC,iBACND,EAAME,kBACN1B,KAAKU,UAAU,mBAIf5B,EAAQ,UACLG,EAAI0C,UAAU,qBAAsBzC","file":"admin/components/roles/create.js","sourcesContent":["/*!\n * FluentKit v0.1.0\n * (c) 2016 Lee Mason\n * Released under the MIT License.\n */\nimport * as util from 'util'\nimport Vue from 'vue'\n\nvar adminRolesCreate = {\n    template: '#admin-roles-create-template',\n    data: function(){\n        return {\n            role: {\n                label: '',\n                name: '',\n                permissions: []\n            },\n            loading: false\n        };\n    },\n    methods: {\n        triggerSave: function(){\n\n            this.loading = true;\n\n            this.$http.post(this.$root.routes.route('api.roles.create'), this.role).then(function (response) {\n\n                var data = {message: response.data.message, timeout: 3000};\n\n                this.$dispatch('notification', data);\n\n                window.location.href = this.$root.routes.route('admin.roles.edit', {id: response.data.role.id});\n\n            }, function (response) {\n\n                if (response.status == 422) {\n\n                    //validation/authorization error - set the errors as returned or clear\n                    var errors = util.formatValidationErrors(response.data.errors);\n                    errors.forEach(function(error){\n                        error.field = error.field.substring(9);\n                    });\n                    this.$setValidationErrors(errors);\n\n                }else if (response.status == 401) {\n                    //something bad happened\n                    var data = {message: response.data, timeout: 3000};\n                    this.$dispatch('notification', data);\n                }else{\n\n                    //something bad happened\n                    var data = {message: 'We encountered a technical problem performing this request, please contact the administrator.', timeout: 3000};\n                    this.$dispatch('notification', data);\n\n                }\n\n                this.loading = false;\n\n            });\n        },\n        closeForm: function(event){\n            event.preventDefault();\n            event.stopPropagation();\n            this.$dispatch('close-create');\n        }\n    }\n};\n\nexport default Vue.component('admin-roles-create', adminRolesCreate);\n\n//export default notifications"],"sourceRoot":"/source/"}