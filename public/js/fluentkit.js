"use strict";System.register(["leemason-polycast","vue","material-design-lite/material","routes"],function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i,s,o,a,r,u,c,l,l;return{setters:[function(t){i=t["default"]},function(t){s=t["default"]},function(t){o=t["default"]},function(t){a=t["default"]}],execute:function(){r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u={el:"body",data:{url:"",user:null,socket:"",loading:!0,routes:null},ready:function(){this.routes=a;var t=document.querySelector('meta[name="url"]');this.url=t.content,this.socket=new i(this.url+"/polycast"),this.subscribeToGlobalNotifications();var e=document.querySelector('meta[name="user"]');null!=e&&(this.user=JSON.parse(e.content),this.subscribeToUserNotifications()),o.componentHandler.upgradeDom(),this.loading=!1},methods:{subscribeToGlobalNotifications:function(){this.socket.subscribe("notifications").on("App\\Events\\Notification",function(t){var e={message:t.message,timeout:3e3};this.$broadcast("notification",e)}.bind(this))},subscribeToUserNotifications:function(){this.socket.subscribe("user."+this.user.email).on("App\\Events\\User\\Notification",function(t){var e={message:t.message,timeout:3e3};this.$broadcast("notification",e)}.bind(this))}}},c=function(){function t(){n(this,t),this.vm=null,this.events={}}return r(t,[{key:"start",value:function(){null==this.vm&&(this.dispatch("beforeStart",this),this.vm=new s(u),this.dispatch("afterStart",this))}},{key:"vm",value:function(){return this.vm}},{key:"on",value:function(t,e,n){this.events.hasOwnProperty(t)||(this.events[t]=[]),this.events[t].push([e,n])}},{key:"dispatch",value:function(t,e){this.events.hasOwnProperty(t)||(this.events[t]=[]);for(var n=Array.prototype.slice.call(arguments,1),i=this.events[t],s=0,o=i.length;o>s;s++){var a=i[s][0],r=void 0===i[s][1]?this:i[s][1];a.apply(r,n)}}}]),t}(),t("app",l=new c),t("app",l),t("default",l)}}});
//# sourceMappingURL=fluentkit.js.map
