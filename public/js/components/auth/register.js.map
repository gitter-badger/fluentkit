{"version":3,"sources":["components/auth/register.js"],"names":["System","register","_export","_context","util","Vue","registerForm","setters","_util","_vue","execute","template","props","data","first_name","last_name","email","password","password_confirmation","errors","global","loading","methods","validateRegister","event","this","preventDefault","$http","post","url","then","response","message","timeout","$root","$dispatch","setTimeout","window","location","href","status","formatValidationErrors","$setValidationErrors","component"],"mappings":"AAAA,YAEAA,QAAOC,UAAU,OAAQ,OAAQ,SAAUC,EAASC,GAChD,GAAIC,GAAMC,EAAKC,CACf,QACIC,SAAU,SAAUC,GAAhBJ,EAAAI,GAED,SAAUC,GADdJ,EAAAI,EAAAA,aAICC,QAAS,WAFbJ,GACAK,SAAU,0BACVC,OAAQ,OACRC,KAAM,WACF,OACIC,WAAY,GACZC,UAAW,GACXC,MAAO,GACPC,SAAU,GACVC,sBAAuB,GACvBC,QACIC,UACAN,cACAC,aACAC,SACAC,YACAC,0BAEJG,SAAS,IAGjBC,SACIC,iBAAkB,SAAUC,GAGxBC,KAAKJ,SAAU,EAHgBG,EAMzBE,iBANyBD,KAS1BE,MAAMC,KAAKH,KAAKI,KACjBf,WAAYW,KAAKX,WACjBC,UAAWU,KAAKV,UAChBC,MAAOS,KAAKT,MACZC,SAAUQ,KAAKR,SACfC,sBAAuBO,KAAKP,wBAC7BY,KAAK,SAAUC,GAEd,GAAIlB,IAAQmB,QAASD,EAASlB,KAAKmB,QAASC,QAAS,IAErDR,MAAKS,MAAMC,UAAU,eAAgBtB,GAErCuB,WAAW,WACPC,OAAOC,SAASC,KAAOR,EAASlB,KAAKyB,UACtC,MAIJ,SAAUP,GAET,GAAuB,KAAnBA,EAASS,OAAe,CAGxBf,KAAKN,OAAOC,OAASW,EAASlB,KAAKM,OAAOC,UAE1C,IAAID,GAASf,EAAKqC,uBAAuBV,EAASlB,KAAKM,OACvDM,MAAKiB,qBAAqBvB,OAEzB,CAGD,GAAIN,IAAQmB,QAAS,gGAAiGC,QAAS,IAC/HR,MAAKS,MAAMC,UAAU,eAAgBtB,GAdtBY,KAmBdJ,SAAU,OAMnBnB,EAAQ,UAALG,EAAIsC,UAAU,gBAAiBrC","file":"components/auth/register.js","sourcesContent":["/*!\n * FluentKit v0.1.0\n * (c) 2016 Lee Mason\n * Released under the MIT License.\n */\nimport * as util from 'util'\nimport Vue from 'vue'\n\nvar registerForm = {\n    template: '#register-form-template',\n    props: ['url'],\n    data: function(){\n        return {\n            first_name: '',\n            last_name: '',\n            email: '',\n            password: '',\n            password_confirmation: '',\n            errors: {\n                global: [],\n                first_name: [],\n                last_name: [],\n                email: [],\n                password: [],\n                password_confirmation: []\n            },\n            loading: false\n        }\n    },\n    methods: {\n        validateRegister: function (event) {\n\n            //show the loader\n            this.loading = true;\n\n            //prevent submission\n            event.preventDefault();\n\n            //validate - authorize the request\n            this.$http.post(this.url, {\n                first_name: this.first_name,\n                last_name: this.last_name,\n                email: this.email,\n                password: this.password,\n                password_confirmation: this.password_confirmation\n            }).then(function (response) {\n\n                var data = {message: response.data.message, timeout: 3000};\n\n                this.$root.$dispatch('notification', data);\n\n                setTimeout(function () {\n                    window.location.href = response.data.location;\n                }, 2000);\n\n                //don't hide the loader here, we don't want them clicking while we redirect them.\n\n            }, function (response) {\n\n                if (response.status == 422) {\n\n                    //validation/authorization error - set the errors as returned or clear\n                    this.errors.global = response.data.errors.global || [];\n\n                    var errors = util.formatValidationErrors(response.data.errors);\n                    this.$setValidationErrors(errors);\n\n                }else{\n\n                    //something bad happened\n                    var data = {message: 'We encountered a technical problem performing this request, please contact the administrator.', timeout: 3000};\n                    this.$root.$dispatch('notification', data);\n\n                }\n\n                //hide the loader, they can try again\n                this.loading = false;\n            });\n        }\n    }\n};\n\nexport default Vue.component('register-form', registerForm);\n\n//export default registerForm"],"sourceRoot":"/source/"}